# Results
```{r, include=FALSE}
# These will install required packages if they are not already installed
if (!require("ggplot2")) {
   install.packages("ggplot2")
   library(ggplot2)
}
if (!require("dplyr")) {
   install.packages("dplyr2")
   library(dplyr)
}
if (!require("knitr")) {
   install.packages("knitr")
   library(knitr)
}
if (!require("xtable")) {
   install.packages("xtable")
   library(xtable)
}
if (!require("caret")) {
   install.packages("caret")
   library(caret)
}
if (!require("reshape2")){
  install.packages("reshape2")
   library(reshape2)
} 
if (!require("gridExtra")){
  install.packages("gridExtra")
   library(gridExtra)
} 
if (!require("MASS")){
  install.packages("MASS")
   library(MASS)
} 
if (!require("reshape2")) {
   install.packages("nnet")
   library(lubridate)
}
if (!require("nnet")) {
   install.packages("reshape2")
   library(lubridate)
}
if (!require("tidyverse")) {
   install.packages("tidyverse")
   library(tidyverse)
}
if (!require("lubridate")) {
   install.packages("lubridate")
   library(lubridate)
}
knitr::opts_chunk$set(echo = TRUE)
```




Yaotian Dai
```{r}
#Some basic graphs
ggplot(comb,aes(x = GENDER))+geom_bar()+
  ggtitle("Amount of female patients and male patients accepted to ICU")
  
ggplot(comb, aes(x = AGE))+geom_bar()+
  ggtitle("Amount of patients of diffent age groups accepted to ICU")

ggplot(comb, aes(x = mortality_withinthirtydays))+geom_bar()+
  ggtitle("Amount of patients of die within 30 days after accepted to ICU")

ggplot(comb, aes(x = ETHNICITY))+geom_bar()+
  ggtitle("Amount of patients of die within 30 days after accepted to ICU")

ggplot(comb, aes(x = INSURANCE))+geom_bar()+
  ggtitle("Amount of patients of die within 30 days after accepted to ICU")
```


```{r}
h2 = comb$ETHNICITY
h1 = comb$mortality_withinthirtydays
df <- data_frame(h2,h1)%>%drop_na()
ggplot(comb,aes(h1,fill=h2))+geom_bar(position = "fill")+coord_flip()+ylab("Percentage")+xlab("die within 30 days")+theme(legend.position="right")+theme(legend.title = element_blank())+ggtitle("Time Period of Using R Language Divided by Age of 35")+theme(plot.title = element_text(hjust = 0.5))




```